<template>
  <div id="app">
    <h1>{{ title }}</h1>
    <div class='three input'>
      <input placeholder='C' v-model="chordName" @input='getChordString' type="input">
      <input v-model='chordString'  disabled type="input" style="display:none" >
    </div>
      <div id="canvas-wrap" class="flex">
        <Canvas :gtpSetting="gtpSetting" v-for="str in chordString" :key='str.id'>
          <Guitar :chordName="chordName" :chordString="str" :gtpSetting="gtpSetting"/>
        </Canvas>
      </div>
  </div>
</template>

<script>
import Canvas from './components/Canvas.vue'
import Guitar from './components/Guitar.vue'
const chordTable = {
  // C key
  C: [ 'o1o23x', 'x5:35:35:33:1x', 'x5:15:15:17:38:4', '8:18:19:210::410::38:1', 'x13::212::114::3xx' ],
  Cm: [ 'x1o1:23:4x', '3:14:25:45:33:1x', '8:18:18:110::410::38:1', 'x13::412::310::1x11::2', '11::113::412::213::3xx' ],
  Cm7: [ 'x13:41x3', '3:14:23:15:33:1x', 'x8:38:38:3x8:2', 'x11::312::410::1x11::2', '11::211::212::310::1xx' ],
  Cmaj7: [ 'ooo2:13:2x', '3:15:44:25:33:1x', '7:35:15:15:1xx', 'x8:29:49:3x8:1', '12::312::312::310::1xx' ],
  C9: [ '3332:13:2x', 'x5:17:28:4x8:3', 'x8:47:28:37:1x', '10::48:19:28:110::38:1', '10::311::49:110::2xx' ],
  C6: [ 'o12:323:4x', '5:35:35:35:33:1x', 'x8:39:47:1x8:2', '8:110::49:210::3xx', '12::413::312::2x12::1x' ],
  Cm9: [ '33313:2x', '6:28:47:3x6:1x', '10::48:18:18:110::38:1', '10::311::48:110::2xx', '15::315::315::313::1xx' ],
  Cm6: [ '3:41213x', '5:44:15:35:2xx', 'x8:48:37:1x8:2', 'x10::112::310::1x11::2', '15::313::114::213::1xx' ],
  Csus: [ '11o3:43x', 'x6:45:35:33:13:1', '8:46:25:15:1xx', '8:18:110::410::38:18:1', '13::413::412::310::1xx' ],
  Csus2: [ '3:41oo3x', 'xx7:45:33:1x', '8:48:45:15:15:1x', '10::48:27:110::3xx', 'x13::412::312::310::110::1' ],
  Dm: [ '132oxx', '5:16:27:47:35:1x', '10::410::410::47:1xx', '10::110::110::112::412::310::1', '13::410::110::112::3xx' ],
  Dm7: [ '112oxx', '5:16:25:17:35:1x', '8:46:17:37:2xx', 'x10::310::310::3x10::2', '10::113::410::110::112::310::1' ],
  Dmaj7: [ '2:12:12:1oxx', '5:17:46:27:35:1x', '9:37:17:17:1xx', 'x10::211::311::4x10::1', 'x14::411::112::312::2x' ],
  D9: [ 'o124xx', '5:35:35:34:15:2x', 'x7:19:210::4x10::3', 'x10::49:210::39:1x', '12::410::111::210::112::310::1' ],
  D6: [ '2:3o2oxx', '5:43:22:14:32:1x', '7:37:37:37:35:1x', 'x10::311::49:1x10::2', '14::412::114::312::1xx' ],
  Dm9: [ 'o123xx', 'x5:45:33:15:2x', '8:210::49:3x8:1x', '12::310::110::110::1xx', '12::313::410::110::112::210::1' ],
  Dm6: [ '1o2oxx', '5:33:14:23:1xx', 'x6:17:47:3x7:2', 'x10::410::39:1x10::2', '13::212::114::312::1xx' ],
  Dsus: [ '3:432:1oxx', 'x8:47:37:35:1x', '10::48:27:17:1xx', '10::110::112::412::310::110::1', '15::415::412::112::112::1x' ],
  Dsus2: [ 'o32:1oxx', '5:15:17:47:35:1x' ],
  Em: [ 'ooo2:32o', '3:25:44:32:1xx', '7:18:29:49:37:1x', '12::412::412::49:1xx', '12::112::112::114::414::312::1' ],
  F: [ '1123:431', '5:16:25:17:38:4x', 'x10::310::310::38:1x', 'x10::110::110::112::313::4', '13::113::114::215::3xx' ],
  Fm: [ '1113:431', '4:26:45:33:1xx', '8:19:210::410::38:1x', 'x9:110::310::211::4x', '13::413::413::410::1xx' ],
  F7: [ '112131', '5:44:25:33:1xx', '5:16:35:1x6:2x', '8:110::48:110::38:1x', '11::210::110::110::1xx' ],
  Fm7: [ '111131', '4:34:25:43:1xx', '8:19:28:110::38:1x', '11::49:110::310::2xx', 'x13::313::313::3x13::2' ],
  Fmaj7: [ 'o123xx', '5:35:35:33:1xx', 'x5:15:17:38:4x', '8:110::49:210::38:1x', 'x13::214::414::3x13::1' ],
  F9: [ '3:412131', '342:13:2xx', '5:16:35:15:16:2x', '8:38:38:37:18:2x', 'x10::112::213::4x13::3' ],
  F6: [ 'x1:22:3ox1', '5:43:15:33:1xx', 'x12:32x3:4', '10::310::310::310::38:1x', 'x13::314::412::1x13::2' ],
  Fm9: [ '111131', '4:34:25:43:1xx', '8:19:28:110::38:1x', '11::49:110::310::2xx', 'x13::313::313::3x13::2' ],
  Fm6: [ '111oxx', '4:23:15:33:1xx', '8:46:17:26:18:3x', 'x13::413::312::1x13::2', '13::115::413::115::315::213::1' ],
  Fsus: [ '113:433:21', '6:46:45:33:1xx', 'x6:25:18:48:3x', 'x11::410::310::28:1x', '13::113::115::415::3xx' ],
  Fsus2: [ '11o3xx', '3:16:45:33:1xx', 'x6:25:15:18:4x', '8:18:110::410::38:1x', '13::413::312::1xx13::2' ],
  F7sus: [ '113:4131', '6:44:25:33:1xx', '6:46:35:1x6:2x', '8:111::48:110::38:1x', '11::311::310::110::1xx' ],
  G: [ '3:4ooo23', '3ooo2:13:2', '3:13:14:25:45:33:1', '7:38:47:25:1xx', 'x8:27:19:310::4x', 'x12::312::312::310::1x' ],
  Gm7: [ '3:13:13:13:15:33:1', 'x333x3:2', '6:36:27:45:1xx', '10::111::210::112::310::1x', '15::115::115::115::1xx' ],
  Gmaj7: [ '2:1ooo23', 'x3:244:3x3:1', '7:37:37:35:1xx', 'x7:17:19:310::4x', '10::112::411::212::310::1x' ],
  G9: [ '1o2oo3', '5:43:14:23:15:33:1', '5:36:44:15:2xx', '10::310::310::39:110::2x', 'x12::114::215::4x15::3' ],
  G6: [ 'oooo2:13:2', '7:45:17:35:1xx', 'x8:19:39:2x10::4', '12::312::312::312::310::1x', 'x15::316::414::1x15::2' ],
  Gm9: [ '5:43:13:13:15:33:1', '5:36:43:15:2xx', 'x10::410::38:110::2x', '10::310::310::38:1xx', '13::215::414::3x13::1x' ],
  Gm6: [ 'o3:43o13:1', '3:15:43:15:35:23:1', '6:25:17:35:1xx', '10::48:19:28:110::3x', 'x15::415::314::1x15::2' ],
  Gsus: [ '3:41oo33:2', '3:13:15:45:35:23:1', '8:48:47:35:1xx', 'x8:27:110::410::3x', 'x13::412::312::210::1x' ],
  Gsus2: [ '3:432:1oo3:2', '5:18:47:35:1xx', 'x8:27:17:110::4x', '10::110::112::412::310::1x', '15::315::314::212::1xx' ],
  G7sus: [ '11oo3:43', '3:13:15:43:15:33:1', '8:46:27:35:1xx', '10::113::410::112::310::1x', '13::213::212::112::1xx' ],
  Am: [ 'o12:32ox', '5:15:15:17:47:35:1', '8:210::49:37:1xx', 'x10::39:110::212::4x', '12::113::214::414::312::1x' ],
  Am7: [ '3:412:32ox', '5:15:15:15:17:35:1', '8:38:29:47:1xx', '12::410::112::310::112::2x', '12::113::212::114::312::1x' ],
  Amaj7: [ 'o2:312ox', '4:15:26:37:4xx', 'x5:26:46:3x5:1', '9:39:39:37:1xx', 'x9:19:111::312::4x' ],
  A9: [ '3:22:14:32:1ox', 'x2:14:25:4x5:3', '7:45:16:25:17:35:1', '7:38:46:17:2xx', '12::312::312::311::112::2x' ],
  A6: [ '2:12:12:12:1ox', 'x5:36:44:1x5:2', '9:47:19:37:1xx', 'x10::111::311::2x12::4', '14::314::314::314::312::1x' ],
  Am9: [ 'ooo2:13:25:4', '7:45:15:15:17:35:1', '7:38:45:17:2xx', 'x12::412::310::112::2x', '12::312::312::310::1xx' ],
  Am6: [ '2:412:32ox', 'x5:45:34:1x5:2', '5:17:45:17:37:25:1', '8:27:19:37:1xx', '12::410::111::210::112::3x' ],
  Asus: [ 'o3:422:1ox', '5:15:17:47:37:25:1', '10::410::49:37:1xx', 'x10::29:112::412::3x', '12::115::414::312::112::112::1' ],
  Asus2: [ 'oo22:1ox', '5:45:34:1xx5:2', '7:110::49:37:1xx', 'x10::29:19:112::4x', 'x12::114::414::314::2x' ],
  A7sus: [ 'o3o2:1ox', '5:15:17:45:17:35:1', '10::48:29:37:1xx', '12::410::112::312::2xx', '12::115::412::114::312::1x' ],
  G7: [ '1ooo23', '3:13:14:23:15:33:1', '7:46:27:35:1xx', '10::112::410::112::310::1x', '13::212::112::112::1xx' ],
  E7: [ 'oo1o2o', 'o3:412:32o', '43:24:32:1xx', '7:19:47:19:37:1x', 'x9:19:19:1x10::2', '12::115::413::212::114::312::1' ],
  Em7: [ 'o3:4o2:32o', '33:242:1xx', '7:18:27:19:37:1x', 'x12::312::312::3x12::2', '12::112::112::112::114::312::1' ],
  Emaj7: [ 'oo1:212:3o', '4:34:34:32:1xx', '7:19:48:29:37:1x', '11::112::213::314::4xx', 'x12::213::413::3x12::1' ],
  E9: [ '2:3o1o2o', '7:37:37:36:17:2x', 'x9:111::212::4x12::3', 'x12::411::212::311::1x', '14::315::413::114::2xx' ],
  E6: [ 'o2:412:32o', '42:14:32:1xx', '7:39:46:1x7:2x', '9:39:39:39:37:1x', 'x12::313::411::1x12::2' ],
  Em9: [ '2:3ooo2o', 'x7:47:35:17:2x', '10::212::411::3x10::1x', '14::312::112::112::1xx', '14::315::412::112::114::212::1' ],
  Em6: [ 'o2:4o2:32o', '3:22:14:32:1xx', '7:45:16:25:17:3x', 'x8:19:49:3x9:2', 'x12::412::311::1x12::2' ],
  Esus: [ 'oo2:42:32o', '5:45:44:32:1xx', 'x10::49:39:27:1x', '12::410::29:19:1xx', '12::112::114::414::312::112::1' ],
  Esus2: [ '2:15:44:32:1xx', '7:45:24:14:1xx', '7:17:19:49:37:1x', '12::412::49:19:19:1x', '12::412::311::1xx12::2' ],
  E7sus: [ 'oo2:3o2o', '5:43:24:32:1xx', '7:110::47:19:37:1x', 'x10::39:19:1x10::2', '12::115::414::312::114::212::1' ],
  //D key
  A7: [ 'o2:3o2ox', '3:22:12:12:1ox', '5:15:16:25:17:35:1', '9:48:29:37:1xx', '9:110::39:1x10::2x', '12::114::412::114::312::1x' ],
  Bm: [ '2:13:244:32:1x', 'x3:14:34:25:4x', '7:17:17:19:49:37:1', '10::212::411::39:1xx', 'x12::311::112::214::4x' ],
  Bm7: [ '2:3o2o2:1x', '2:13:22:14:32:1x', 'x7:37:37:3x7:2', '7:110::47:17:19:37:1', '10::310::211::49:1xx' ],
  Bmaj7: [ '2:3x3:412x', '243x2:1x', 'xx3:14:26:37:4', '6:17:28:39:4xx', 'xx8:38:29:47:1', '11::311::311::39:1xx', '11::111::111::1x14::4x', '11::111::111::113::314::4x' ],
  B9: [ '2:32:32:312x', '9:47:18:27:19:37:1', 'x7:46:17:36:17:2', '7:47:36:17:2xx' ],
  B6: [ '4:34:34:34:32:1x', '4:14:14:14:16:37:4', 'x7:38:46:1x7:2', '11::49:111::39:1xx', '14::316::413::1x14::2x' ],
  Bm9: [ '2:32:32:3o2x', '9:47:17:17:19:37:1', '9:310::47:19:2xx', 'x14::414::312::114::2x', '14::314::314::312::1xx' ],
  Bm6: [ '2:33:41o2x', 'x7:47:36:1x7:2', '7:19:47:19:39:27:1', '10::29:111::39:1xx', '14::412::113::212::114::3x' ],
  Bsus: [ 'oo44:32:1x', '7:45:24:14:1xx', '7:17:19:49:39:27:1', '12::412::411::39:1xx', 'x12::211::114::414::3x' ],
  Bsus2: [ '2:12:144:32:1x', '7:47:36:1xx7:2', '9:112::411::39:1xx', 'x12::211::111::114::4x', 'x14::116::416::316::2x' ],
  B7sus: [ '2:4o2:322:1x', '2:15:42:14:32:1x', '7:17:19:47:19:37:1', '12::410::211::39:1xx', '14::412::114::314::2xx' ],
  A: [ 'o2:322:1ox', '5:15:16:27:47:35:1', '9:310::49:27:1xx', 'x10::29:111::312::4x', 'x14::314::314::312::1x' ],
  //G: [ '3:4ooo23', '3ooo2:13:2' ],
  '#Fm': [ '2:12:12:144:32:1'],
  //'Em': [ 'ooo2:32o' ],
  D: [ '232:1oxx', '2:13:22:1oxx', 'x7:37:37:35:1x', 'x7:17:17:19:310::4', '10::110::111::212::412::310::1', '14::115::214::116::3xx' ],
  // E key
  B7: [ '2:4o2:312x', '2:142:14:32:1x', '7:17:18:27:19:37:1', '11::410::211::39:1xx', '11::112::311::1x12::2x' ],
  '#Cm': [ '4:15:26:46:34:1x' ],
  B: [ '2:144:34:22:1x', 'x4:34:34:32:1x', 'x4:14:14:16:37:4', '7:17:18:29:49:37:1', '11::312::411::29:1xx', 'x12::211::113::314::4x' ],
  //A: [ 'o2:322:1ox' ],
  '#Gm': [ '4:14:14:16:46:34:1' ],
  //#Fm: [ '2:12:12:144:32:1'],
  E: [ 'oo12:32o', '4:15:24:16:3xx', 'x9:39:39:37:1x', 'x9:19:19:111::312::4', '12::112::113::214::414::312::1' ],

  // F key
  C7: [ 'o13:423x', '3:15:43:15:33:1x', '6:25:15:15:1xx', '8:18:19:28:110::38:1', '12::411::212::310::1xx' ],
  C7sus: [ 'x13:433:2x', '3:16:43:15:33:1x', '6:26:25:15:1xx', '8:18:110::48:110::38:1', '13::411::212::310::1xx' ],
  //Dm: [ '132oxx' ],
  //C: [ 'o1o23x' ],
  bB: [ '13:433:211' ],
  //Am: [ 'o12:32ox' ],
  Gm: [ '3:43oo13:2', '3:13:13:15:45:33:1', '6:28:47:35:1xx', '10::111::212::412::310::1x', '15::415::415::412::1xx' ],
  //F: [ '1123:431' ],
  // G key
  //B7 
  D7: [ '2:312oxx', '5:43:15:34:2xx', '5:17:45:17:35:1x', '10::110::111::210::112::310::1', '14::413::311::112::2xx' ],
  D7sus: [ '3:412oxx', '5:43:15:35:2xx', '5:18:45:17:35:1x', '8:38:37:17:1xx', '10::113::412::310::112::210::1' ],
  //Em
  //D
  //C
  //Bm
  //Am
  //G
  //A key
  //E7
  //#Fm
  //E
  //D
  //#Cm
  //Bm
  //A
  //B key
  '#F7': [ '2:12:13:22:14:32:1' ],
  '#F': [ '2:12:13:244:32:1' ],
  //E
  '#Dm': [ '6:17:28:48:36:1x' ],
  //#Cm
  //B
};
export default {
  name: 'app',
  data(){
    return {
      title: 'Guitar Chord Generator',
      chordName: '',
      chordString: [],
      gtpSetting: {
        hgap: 45,
        vgap: 45*.72,
        pin: 5,
        init: 20,
        bg: '#eec',
        fg: '#369',
        ft: '18px Consolas bold',
        fts: '12px Consolas bold',
        w: 300,
        h: 280
      }
    }
  },
  methods:{
    getChordString: function(){
      if(chordTable[this.chordName]){
        this.chordString = chordTable[this.chordName];
      }else{
        //deal with alias for the chord name
        let str = this.chordName;
        let cstr = '';
        if( str.slice(-4) === 'sus4' ){
          cstr = str.slice(0,-1)
          this.chordString = chordTable[cstr];
        }else if( str.length == 6 && str.slice(-5) === '5add2' ){
          cstr = str.substring(0,1)+'sus2';
          this.chordString = chordTable[cstr];
        }else{
          this.chordString = null;
        }
        //let objKeys = Object.keys( chordTable );
        //let lastKeyIndex = objKeys.length-1;
        //this.chordName = objKeys[lastKeyIndex];
        //this.chordString = chordTable[this.chordName];
      }
    }
  },
  components: {
    Canvas,
    Guitar
  },
}
</script>
<style>
@import "../node_modules/picnic/picnic.min.css";
#app{
  font-family: 'Avenir', Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
#app .input{
  margin-bottom: 2em;
}
</style>
